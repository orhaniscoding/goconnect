# =============================================================================
# coturn TURN Server Configuration for GoConnect
# =============================================================================
# This configuration file is used for NAT traversal relay functionality.
# The TURN server allows peers behind strict NATs to communicate via relay.
# =============================================================================

# Listening configuration
listening-port=3478
tls-listening-port=5349
listening-ip=0.0.0.0

# Relay ports range
min-port=49152
max-port=49252

# Authentication
# Use time-limited credentials with HMAC-SHA1
# The secret is passed via command line for security
use-auth-secret
# static-auth-secret will be passed via command line

# Realm (domain)
# Will be passed via command line

# Logging
log-file=stdout
verbose

# Security
fingerprint
lt-cred-mech

# TURN REST API compatibility
# Credentials format: username = timestamp:user_id
# credential = base64(hmac-sha1(secret, username))

# Performance
total-quota=100
bps-capacity=0
stale-nonce=600

# Network settings
no-multicast-peers

# Relay address configuration
# If behind NAT, set external-ip via command line or environment variable
# --external-ip=<public_ip>/<local_ip>

# Disable CLI (security)
no-cli

# Disable DTLS (we use coturn only for media relay, WebRTC handles encryption)
# no-dtls

# Allow loopback peers (for testing/development)
allow-loopback-peers
